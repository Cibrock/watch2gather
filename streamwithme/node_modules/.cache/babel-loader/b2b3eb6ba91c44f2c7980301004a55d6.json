{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Viktor\\\\Documents\\\\Studium\\\\WuM\\\\Watch2Gether\\\\streamwithme\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Viktor\\\\Documents\\\\Studium\\\\WuM\\\\Watch2Gether\\\\streamwithme\\\\src\\\\Room.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./components/styles/Room.css\";\nimport { user } from \"./App\";\nimport { Helmet, HelmetProvider } from 'react-helmet-async';\nimport Video from \"./components/Video\";\nimport Navbar from \"./components/Navbar\";\nimport { getRooms, leaveRoom } from \"./components/API/RoomAPI\";\nimport { deleteUser } from \"./components/API/UserAPI\";\nimport Backgroundvideo from \"./components/Backgroundvideo\";\nimport Footer from \"./components/Footer\";\nvar APP = 'StreamWithMe';\nexport var roomName = \"\";\nexport var setRoomName = function setRoomName(name) {\n  roomName = name;\n};\n\nvar Room = function Room() {\n  var _useState = useState(APP),\n      _useState2 = _slicedToArray(_useState, 2),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  useEffect(function () {\n    // if (roomName === undefined) {\n    //     let roomData = await getRooms()\n    //     roomName = roomData.rooms[0].name\n    //     setTitle(APP + \" - \" + roomName)\n    // }\n    var handleTabClose = function handleTabClose(event) {\n      event.preventDefault();\n      leaveRoom(roomName, user);\n      deleteUser(user);\n      console.log(\"beforeunload\");\n      return event.returnValue = 'Are you sure you want to exit?';\n    };\n\n    window.addEventListener('beforeunload', handleTabClose);\n    return function () {\n      return window.removeEventListener('beforeunload', handleTabClose);\n    };\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Room\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(HelmetProvider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Helmet, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 21\n    }\n  }, title)), /*#__PURE__*/React.createElement(Navbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"room-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 21\n    }\n  }, roomName), /*#__PURE__*/React.createElement(Video, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Backgroundvideo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }));\n}; // class Room extends React.Component {\n//     constructor(props) {\n//         super(props);\n//         this.state = { title: TITLE + \" - \" + roomName };\n//     }\n//     async componentDidMount() {\n//         //Set the default roomName\n//         if (roomName === undefined) {\n//             let roomData = await getRooms()\n//             roomName = roomData.rooms[0].name\n//             this.setState({ title: TITLE + \" - \" + roomName })\n//         }\n//         //remove the user from the room if they leave the side\n//         const handleTabClose = event => {\n//             event.preventDefault();\n//             leaveRoom(roomName, user)\n//             deleteUser(user)\n//             console.log(\"beforeunload\");\n//             return (event.returnValue = 'Are you sure you want to exit?');\n//         };\n//         window.addEventListener('beforeunload', handleTabClose);\n//         return () => {\n//             window.removeEventListener('beforeunload', handleTabClose);\n//         };\n//     }\n//     render() {\n//         return (\n//             <div className=\"Room\">\n//                 <HelmetProvider>\n//                     <Helmet>\n//                         <title>{this.state.title}</title>\n//                     </Helmet>\n//                     <Navbar />\n//                     <div className=\"room-container\">\n//                         <h1>{roomName}</h1>\n//                         <Video />\n//                     </div>\n//                     <Backgroundvideo />\n//                 </HelmetProvider>\n//                 <Footer />\n//             </div>\n//         )\n//     }\n//     customForceUpdate() {\n//         this.forceUpdate()\n//     }\n// }\n\n\nexport default Room;","map":{"version":3,"names":["React","useEffect","useState","user","Helmet","HelmetProvider","Video","Navbar","getRooms","leaveRoom","deleteUser","Backgroundvideo","Footer","APP","roomName","setRoomName","name","Room","title","setTitle","handleTabClose","event","preventDefault","console","log","returnValue","window","addEventListener","removeEventListener"],"sources":["C:/Users/Viktor/Documents/Studium/WuM/Watch2Gether/streamwithme/src/Room.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./components/styles/Room.css\"\r\nimport { user } from \"./App\";\r\nimport { Helmet, HelmetProvider } from 'react-helmet-async';\r\nimport Video from \"./components/Video\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { getRooms, leaveRoom } from \"./components/API/RoomAPI\";\r\nimport { deleteUser } from \"./components/API/UserAPI\";\r\nimport Backgroundvideo from \"./components/Backgroundvideo\";\r\nimport Footer from \"./components/Footer\";\r\n\r\nconst APP = 'StreamWithMe'\r\n\r\nexport let roomName = \"\"\r\nexport const setRoomName = (name) => { roomName = name }\r\n\r\nconst Room = () => {\r\n    const [title,setTitle] = useState(APP);\r\n\r\n    useEffect( () => {\r\n        // if (roomName === undefined) {\r\n        //     let roomData = await getRooms()\r\n        //     roomName = roomData.rooms[0].name\r\n        //     setTitle(APP + \" - \" + roomName)\r\n        // }\r\n        const handleTabClose = event => {\r\n            event.preventDefault();\r\n            leaveRoom(roomName, user)\r\n            deleteUser(user)\r\n            console.log(\"beforeunload\");\r\n            return (event.returnValue = 'Are you sure you want to exit?');\r\n        };\r\n        window.addEventListener('beforeunload', handleTabClose);\r\n\r\n        return () => window.removeEventListener('beforeunload', handleTabClose);\r\n    } )\r\n\r\n    return (\r\n        <div className=\"Room\">\r\n            <HelmetProvider>\r\n                <Helmet>\r\n                    <title>{title}</title>\r\n                </Helmet>\r\n                <Navbar />\r\n                <div className=\"room-container\">\r\n                    <h1>{roomName}</h1>\r\n                    <Video />\r\n                </div>\r\n                <Backgroundvideo />\r\n            </HelmetProvider>\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n\r\n// class Room extends React.Component {\r\n//     constructor(props) {\r\n//         super(props);\r\n//         this.state = { title: TITLE + \" - \" + roomName };\r\n//     }\r\n\r\n//     async componentDidMount() {\r\n//         //Set the default roomName\r\n//         if (roomName === undefined) {\r\n//             let roomData = await getRooms()\r\n//             roomName = roomData.rooms[0].name\r\n//             this.setState({ title: TITLE + \" - \" + roomName })\r\n//         }\r\n\r\n//         //remove the user from the room if they leave the side\r\n//         const handleTabClose = event => {\r\n//             event.preventDefault();\r\n//             leaveRoom(roomName, user)\r\n//             deleteUser(user)\r\n//             console.log(\"beforeunload\");\r\n//             return (event.returnValue = 'Are you sure you want to exit?');\r\n//         };\r\n//         window.addEventListener('beforeunload', handleTabClose);\r\n\r\n//         return () => {\r\n//             window.removeEventListener('beforeunload', handleTabClose);\r\n//         };\r\n//     }\r\n\r\n//     render() {\r\n//         return (\r\n//             <div className=\"Room\">\r\n//                 <HelmetProvider>\r\n//                     <Helmet>\r\n//                         <title>{this.state.title}</title>\r\n//                     </Helmet>\r\n//                     <Navbar />\r\n//                     <div className=\"room-container\">\r\n//                         <h1>{roomName}</h1>\r\n//                         <Video />\r\n//                     </div>\r\n//                     <Backgroundvideo />\r\n//                 </HelmetProvider>\r\n//                 <Footer />\r\n//             </div>\r\n//         )\r\n//     }\r\n//     customForceUpdate() {\r\n//         this.forceUpdate()\r\n//     }\r\n// }\r\n\r\nexport default Room"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,8BAAP;AACA,SAASC,IAAT,QAAqB,OAArB;AACA,SAASC,MAAT,EAAiBC,cAAjB,QAAuC,oBAAvC;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,0BAApC;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AAEA,IAAMC,GAAG,GAAG,cAAZ;AAEA,OAAO,IAAIC,QAAQ,GAAG,EAAf;AACP,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,IAAD,EAAU;EAAEF,QAAQ,GAAGE,IAAX;AAAiB,CAAjD;;AAEP,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;EAAA,gBACUf,QAAQ,CAACW,GAAD,CADlB;EAAA;EAAA,IACRK,KADQ;EAAA,IACFC,QADE;;EAGflB,SAAS,CAAE,YAAM;IACb;IACA;IACA;IACA;IACA;IACA,IAAMmB,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,KAAK,EAAI;MAC5BA,KAAK,CAACC,cAAN;MACAb,SAAS,CAACK,QAAD,EAAWX,IAAX,CAAT;MACAO,UAAU,CAACP,IAAD,CAAV;MACAoB,OAAO,CAACC,GAAR,CAAY,cAAZ;MACA,OAAQH,KAAK,CAACI,WAAN,GAAoB,gCAA5B;IACH,CAND;;IAOAC,MAAM,CAACC,gBAAP,CAAwB,cAAxB,EAAwCP,cAAxC;IAEA,OAAO;MAAA,OAAMM,MAAM,CAACE,mBAAP,CAA2B,cAA3B,EAA2CR,cAA3C,CAAN;IAAA,CAAP;EACH,CAhBQ,CAAT;EAkBA,oBACI;IAAK,SAAS,EAAC,MAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,cAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,MAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAQF,KAAR,CADJ,CADJ,eAII,oBAAC,MAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAJJ,eAKI;IAAK,SAAS,EAAC,gBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAKJ,QAAL,CADJ,eAEI,oBAAC,KAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFJ,CALJ,eASI,oBAAC,eAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EATJ,CADJ,eAYI,oBAAC,MAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAZJ,CADJ;AAgBH,CArCD,C,CAuCA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAeG,IAAf"},"metadata":{},"sourceType":"module"}