{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Viktor\\\\Documents\\\\Studium\\\\WuM\\\\Watch2Gether\\\\streamwithme\\\\src\\\\Room.js\";\n\nimport React, { useEffect, useCallback } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport \"./components/styles/Room.css\";\nimport { userState } from \"./App\";\nimport { Helmet, HelmetProvider } from 'react-helmet-async';\nimport Video from \"./components/Video\";\nimport Navbar from \"./components/Navbar\";\nimport { leaveRoom } from \"./components/API/RoomAPI\";\nimport { deleteUser } from \"./components/API/UserAPI\";\nimport Footer from \"./components/Footer\";\nimport { hookstate, useHookstate } from '@hookstate/core';\nimport Chat from \"./components/Chat\";\nimport UserList from \"./components/UserList\";\nimport VideoInput from \"./components/VideoInput\";\nexport var roomState = hookstate(false);\n\nvar Room = function Room() {\n  var APP = 'StreamWithMe';\n  var roomName = useHookstate(roomState);\n  var navigate = useNavigate();\n  var navigateToHome = useCallback(function () {\n    return navigate(\"/\", {\n      replace: true\n    });\n  }, [navigate]);\n  useEffect(function () {\n    if (roomName.get() === false) {\n      navigateToHome();\n    }\n\n    var handleTabClose = function handleTabClose(event) {\n      event.preventDefault();\n      leaveRoom(roomName.get(), userState.get());\n      deleteUser(userState.get()); // navigateToHome();\n\n      console.log(\"beforeunload\");\n      return event.returnValue = 'Are you sure you want to exit?';\n    };\n\n    window.addEventListener('beforeunload', handleTabClose);\n    return function () {\n      return window.removeEventListener('beforeunload', handleTabClose);\n    };\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Room\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(HelmetProvider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Helmet, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  }, APP + \" - \" + roomName.get())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }, \"    \", /*#__PURE__*/React.createElement(Navbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 45\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"videoInput\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(VideoInput, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 45\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, \"     \", /*#__PURE__*/React.createElement(Video, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 45\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, \"      \", /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 45\n    }\n  }, \"Chat\"), /*#__PURE__*/React.createElement(Chat, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 58\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"users\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }, \"     \", /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 45\n    }\n  }, \"Users\"), /*#__PURE__*/React.createElement(UserList, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 59\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, \"    \", /*#__PURE__*/React.createElement(Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 45\n    }\n  }), \" \")));\n};\n\nexport default Room;","map":{"version":3,"names":["React","useEffect","useCallback","useNavigate","userState","Helmet","HelmetProvider","Video","Navbar","leaveRoom","deleteUser","Footer","hookstate","useHookstate","Chat","UserList","VideoInput","roomState","Room","APP","roomName","navigate","navigateToHome","replace","get","handleTabClose","event","preventDefault","console","log","returnValue","window","addEventListener","removeEventListener"],"sources":["C:/Users/Viktor/Documents/Studium/WuM/Watch2Gether/streamwithme/src/Room.js"],"sourcesContent":["import React, { useEffect, useCallback } from \"react\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport \"./components/styles/Room.css\";\r\nimport { userState } from \"./App\";\r\nimport { Helmet, HelmetProvider } from 'react-helmet-async';\r\nimport Video from \"./components/Video\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { leaveRoom } from \"./components/API/RoomAPI\";\r\nimport { deleteUser } from \"./components/API/UserAPI\";\r\nimport Footer from \"./components/Footer\";\r\nimport { hookstate, useHookstate } from '@hookstate/core';\r\nimport Chat from \"./components/Chat\";\r\nimport UserList from \"./components/UserList\";\r\nimport VideoInput from \"./components/VideoInput\";\r\n\r\nexport const roomState = hookstate(false);\r\n\r\nconst Room = () => {\r\n    const APP = 'StreamWithMe';\r\n    const roomName = useHookstate(roomState);\r\n    const navigate = useNavigate();\r\n    const navigateToHome = useCallback(() => navigate(\"/\", { replace: true }), [navigate]);\r\n\r\n    useEffect(() => {\r\n        if (roomName.get() === false) {\r\n            navigateToHome();\r\n        }\r\n        const handleTabClose = event => {\r\n            event.preventDefault();\r\n            leaveRoom(roomName.get(), userState.get());\r\n            deleteUser(userState.get());\r\n            // navigateToHome();\r\n            console.log(\"beforeunload\");\r\n            return (event.returnValue = 'Are you sure you want to exit?');\r\n        };\r\n        window.addEventListener('beforeunload', handleTabClose);\r\n\r\n        return () => window.removeEventListener('beforeunload', handleTabClose);\r\n    });\r\n\r\n    return (\r\n        <div className=\"Room\">\r\n            <HelmetProvider>\r\n                <Helmet>\r\n                    <title>{APP + \" - \" + roomName.get()}</title>\r\n                </Helmet>\r\n                <div className=\"header\">    <Navbar /> </div>\r\n                <div className=\"videoInput\"><VideoInput/> </div>\r\n                <div className=\"video\">     <Video /> </div>\r\n                <div className=\"chat\">      <h2>Chat</h2><Chat /> </div>\r\n                <div className=\"users\">     <h2>Users</h2><UserList /> </div>\r\n                <div className=\"footer\">    <Footer /> </div>\r\n            </HelmetProvider>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Room;"],"mappings":"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"},"metadata":{},"sourceType":"module"}